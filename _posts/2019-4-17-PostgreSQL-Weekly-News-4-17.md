---
layout: post
title: PostgreSQL æ¯å‘¨æ–°é—» 2019-04-17
---

### PostgreSQLæ¯å‘¨æ–°é—»#301 - 2019å¹´4æœˆ17æ—¥
![_config.yml]({{ site.baseurl }}/images/PostgresWeekly.png)

å¤‡æ³¨ï¼š[è‹±æ–‡åŸæ–‡åœ°å€](https://postgresweekly.com/issues/301)

## ['Postgresç°åœ¨æœ‰å¯æ’æ‹”çš„è¡¨å­˜å‚¨'](https://twitter.com/AndresFreundTec/status/1113948321976946689)
å¥½å§ï¼Œæ ¸å¿ƒç¡®å®å¦‚æ­¤ï¼Œæˆ‘ä»¬éœ€è¦ç­‰å¾…ä¸€æ®µæ—¶é—´æ‰èƒ½åœ¨ç”Ÿäº§ä¸­ä½¿ç”¨å®ƒï¼Œä½†èƒ½å¤Ÿæ›´è½»æ¾åœ°åˆ‡æ¢åˆ°è¡¨å­˜å‚¨ç³»ç»Ÿå°†ä¼šå¸¦æ¥æœ‰è¶£çš„æœºä¼šã€‚

`ANDRES FREUND ON TWITTER`

## [ç”¨Cè¯­è¨€ç¼–å†™PostgreSQLæ‰©å±•å¾ˆæœ‰è¶£](https://www.percona.com/blog/2019/04/05/writing-postgresql-extensions-is-fun-c-language/)
è¿™å–å†³äºä½ å¯¹ä¹è¶£çš„å®šä¹‰ï¼Œä½†å®ƒå¹¶ä¸åƒæˆ‘æƒ³è±¡çš„é‚£ä¹ˆå›°éš¾ã€‚è¿™ç¯‡æ–‡ç« ä»‹ç»äº†å…¥é—¨çš„åŸºæœ¬æ­¥éª¤ã€‚å¦‚æœæ‚¨å¸Œæœ›ç»§ç»­è¿™æ ·åšï¼Œæˆ‘è®¤ä¸ºé˜…è¯»ç®€å•ä½†å®Œæ•´çš„æ‰©å±•ä»£ç ï¼Œä¾‹å¦‚[count_distinct](https://github.com/tvondra/count_distinct/blob/master/src/count_distinct.c)ï¼Œæ˜¯éå¸¸æœ‰ç”¨çš„ã€‚çš„

`IBRAR AHMED`

## [å­¦ä¼šä¿æŠ¤æ‚¨çš„æ•°æ®åº“](https://resources.2ndquadrant.com/security-and-compliance-with-postgresql)
![img](https://copm.s3.amazonaws.com/9a6f3274.png)  
åŠ å…¥å…è´¹çš„PostgreSQLç½‘ç»œç ”è®¨ä¼šï¼šPostgreSQLçš„å®‰å…¨æ€§å’Œåˆè§„æ€§ï¼Œå¹¶å­¦ä¹ å¦‚ä½•è¯†åˆ«å’Œä¿æŠ¤æ‚¨çš„æ•°æ®åº“æ¼æ´ç‚¹ã€‚[ä»Šå¤©é¢„å®šæ‚¨çš„ä½ç½®](https://resources.2ndquadrant.com/security-and-compliance-with-postgresql)

`2NDQUADRANT POSTGRESQL WEBINARS`  **èµåŠ©å•†**

## [å½“Postgresé˜»å¡ï¼šå¤„ç†é”çš„7ä¸ªæŠ€å·§](https://www.citusdata.com/blog/2018/02/22/seven-tips-for-dealing-with-postgres-locks/)
æˆ‘ä»¬æ­£åœ¨é‡æ–°å®¡è§†ä¸€ä¸ªç»å…¸å¸–å­ï¼Œè¯¥å¸–å­å¼ºè°ƒäº†å¼€å‘äººå‘˜åœ¨å¤„ç†Postgresé”æ—¶ä¼šé‡åˆ°çš„å¸¸è§é”™è¯¯ä»¥åŠæªæ–½ã€‚

`MARCO SLOT`

## [Postgres 12æ­£åœ¨ä¼˜åŒ–å°è¡¨çš„å­˜å‚¨](https://www.2ndquadrant.com/en/blog/optimizing-storage-small-tables-postgresql-12/)
å¦‚æœæ‚¨çš„æ•°æ®åº“æ¨¡å‹è¦æ±‚æ‚¨æ‹¥æœ‰å¤§é‡å°è¡¨ï¼ˆä¾‹å¦‚ï¼Œmulti-tenant schemaï¼‰ï¼Œè¯·é˜…è¯»è¿™ç¯‡æ–‡ç« ã€‚åœ¨Postgres 12ä¸­ï¼Œäº‹æƒ…ä¼šå˜å¾—æ›´æœ‰æ•ˆç‡ã€‚

`JOHN NAYLOR`

## [Swarm64æ”¯æŒXilinx AlveoåŠ é€Ÿå™¨](https://swarm64.com/press-release/swarm64-supports-xilinx-alveo/)
å†’ç€å¬èµ·æ¥åƒä¸€å †æµè¡Œè¯­å’Œå•†æ ‡çš„é£é™©ï¼Œè¿™æ˜¯ä¸€ç¯‡å…³äº[åŸºäºFPGAçš„æ•°æ®åº“åŠ é€Ÿå™¨](https://swarm64.com/productsolution/)æ”¯æŒPostgresçš„æ–°é—»ç¨¿ã€‚

`SWARM64`

## [ä½¿ç”¨pg_upgradeä»¥æœ€çŸ­çš„åœæœºæ—¶é—´å¿«é€Ÿå‡çº§Legacy Postgres](https://www.percona.com/blog/2019/04/12/fast-upgrade-of-legacy-postgresql-with-minimum-downtime-using-pg_upgrade/)
æ¥è‡ªPerconaçš„ä¸€ç³»åˆ—Postgreså‡çº§å¸–å­ä¸­çš„æœ€æ–°ä¸€ç¯‡ã€‚è¿™æ¬¡è€ƒè™‘äº†[pg_upgrade](https://www.postgresql.org/docs/11/pgupgrade.html)ï¼ˆä»¥å‰çš„pg_migratorï¼‰ã€‚

`AVINASH VALLARAPU`

## [ç”¨äºPostgreSQLçš„Azureæ•°æ®åº“å…¥é—¨](https://docs.microsoft.com/en-us/azure/postgresql/?ocid=orcas_pw_pgs)
å®Œå…¨æ‰˜ç®¡çš„Postgresæ•°æ®åº“å¼•æ“ï¼Œå…·æœ‰å†…ç½®çš„é«˜å¯ç”¨æ€§ï¼Œå¯ä¼¸ç¼©æ€§å’Œå®‰å…¨æ€§ç­‰åŠŸèƒ½ã€‚ å¼€å§‹ä½¿ç”¨æ‚¨é€‰æ‹©çš„å¼€æºå·¥å…·ã€‚

`MICROSOFT AZURE` **èµåŠ©å•†**

## [Postgres 12äº®ç‚¹ï¼špg_checksums](https://paquier.xyz/postgresql-2/postgres-12-pg-checksums/)
é‡æ–°å‘½åPostgres 11ä¸­å¼•å…¥çš„pg_verify_checksumsã€‚

`MICHAEL PAQUIER`

## [pspgï¼šPostgresçš„psqlå®¢æˆ·ç«¯çš„æ›¿ä»£](https://github.com/okbob/pspg)
æ›¿æ¢è¾ƒå°‘å¹¶æ”¯æŒè¡¨æ ¼æ•°æ®ã€‚

`PAVEL STEHULE`

## [Martenï¼šåŸºäºPostgresçš„.NETç³»ç»ŸæŒä¹…æ€§](http://jasperfx.github.io/marten/)
åŸºäº.NETçš„åº”ç”¨ç¨‹åºçš„æ–‡æ¡£æ•°æ®åº“å’Œäº‹ä»¶å­˜å‚¨ï¼Œå®ƒä½¿ç”¨Postgresåœ¨åç«¯æ‰§è¡Œç¹é‡çš„å·¥ä½œã€‚ å¹¶ä¸”ï¼Œæ˜¯çš„ï¼Œå®ƒé€‚ç”¨äº.NET Core :-)

`JASPERFX`

## [libpqxxï¼šPostgreså®˜æ–¹C ++å®¢æˆ·ç«¯API](https://github.com/jtv/libpqxx)
libpqxxæœ€è¿‘æœ‰å¾ˆå¤šæ›´æ–°ã€‚

`JEROEN VERMEULEN`

# ![_config.yml]({{ site.baseurl }}/images/Tips-icon.png)   æœ¬å‘¨æç¤º
ç”±PERCONAæä¾›æ”¯æŒ

è‡ªåŠ¨è®°å½•æ…¢æŸ¥è¯¢

æ‰˜ç®¡æˆ‘ä»¬çš„æ—¶äº‹é€šè®¯ä¸šåŠ¡çš„æœåŠ¡å™¨è¿è¡Œç¼“æ…¢ï¼Œæˆ‘ä»¬ä¸çŸ¥é“åŸå› ã€‚ç‰¹åˆ«æ˜¯Postgresï¼Œæ‰€ä»¥æˆ‘ä»¬å¸Œæœ›çœ‹åˆ°å“ªäº›æŸ¥è¯¢é™·å…¥å›°å¢ƒã€‚

ä¸å¤§å¤šæ•°æ•°æ®åº“ä¸€æ ·ï¼ŒPostgreså…·æœ‰å†…ç½®çš„æ…¢æŸ¥è¯¢æ—¥å¿—åŠŸèƒ½ï¼Œå¦‚æœå®ƒä»¬å ç”¨äº†ä¸€å®šçš„æ—¶é—´ï¼Œå®ƒä¼šè‡ªåŠ¨å°†æŸ¥è¯¢è®°å½•åˆ°ä¸»Postgresæ—¥å¿—æ–‡ä»¶ä¸­ï¼Œè®¾ç½®èµ·æ¥éå¸¸ç®€å•ã€‚

åœ¨ä½ çš„ä¸»postgresql.confæ–‡ä»¶ï¼ˆé€šå¸¸æ˜¯/etc/postgresql/9.6/main/postgresql.confï¼‰ä¸­ï¼Œç¼–è¾‘æˆ–æ·»åŠ ä¸€è¡Œå¦‚ä¸‹ï¼š

```
log_min_duration_statement = 1000
```

é‡æ–°å¯åŠ¨Postgresæˆ–ä½¿ç”¨SELECT pg_reload_confï¼ˆï¼‰é‡æ–°åŠ è½½é…ç½®åï¼Œæ­¤æŒ‡ä»¤å°†è®°å½•è¶…è¿‡1000æ¯«ç§’ï¼ˆä¸€ç§’ï¼‰çš„ä»»ä½•æŸ¥è¯¢ã€‚

ï¼ˆæ—¥å¿—æ–‡ä»¶çš„ä½ç½®ä¸åŒï¼Œä½†åœ¨æˆ‘çš„æµ‹è¯•è®¾ç½®ä¸­çš„æ˜¯/var/log/postgresql/postgresql-9.6-main.logã€‚ï¼‰

æ•…æ„ä¸ºæµ‹è¯•ç›®çš„è¿è¡Œé•¿æŸ¥è¯¢ï¼š

```
select pg_sleep(10) /* just testing */;
```

è¯·æ³¨æ„æŸ¥è¯¢ä¸­æ˜¯å¦å­˜åœ¨æ³¨é‡Šï¼Œè¯¥æ³¨é‡Šä¹Ÿä¼šå‡ºç°åœ¨æ—¥å¿—ä¸­ï¼Œä»¥ä¾¿å…¶ä»–ç›‘æ§äººå‘˜äº†è§£æ­£åœ¨å‘ç”Ÿçš„äº‹æƒ…ã€‚

Postgresä¸ä¼šå¯¼è‡´æˆ‘ä»¬çš„æ€§èƒ½é—®é¢˜ã€‚æˆ‘ä»¬çš„VPSæ˜¯åœ¨ä¸€ä¸ªå…±äº«çš„ç›’å­ä¸Šï¼Œå®ƒè¢«å¤§é‡ä½¿ç”¨ï¼Œå®ä¾‹çš„å‡çº§ä¿®å¤äº†å®ƒã€‚ä¸è¿‡ï¼Œæˆ‘ä¼šæ³¨æ„åˆ°ï¼Œå¦‚æœä½ è¿è¡Œä»»ä½•VPSé£æ ¼çš„æœåŠ¡å™¨ï¼Œé‚£ä¹ˆç†Ÿæ‚‰[â€œçªƒå–æ—¶é—´â€ä»¥åŠå¦‚ä½•ç›‘æ§å®ƒ](https://scoutapm.com/blog/understanding-cpu-steal-time-when-should-you-be-worried)æ˜¯éå¸¸å€¼å¾—çš„ï¼

> æœ¬å‘¨æç¤ºç”±[Percona](https://www.percona.com/resources/webinars/upgrading-migrating-your-legacy-postgresql-newer-postgresql-versions)æä¾›æ”¯æŒã€‚åŠ å…¥Perconaï¼Œæˆ‘ä»¬å°†æ‚¨çš„[è€ç‰ˆæœ¬PostgreSQLå‡çº§/è¿ç§»åˆ°æ›´æ–°çš„PostgreSQLç‰ˆæœ¬](https://www.percona.com/resources/webinars/upgrading-migrating-your-legacy-postgresql-newer-postgresql-versions)ã€‚

ğŸ—“  å³å°†ä¸¾åŠçš„Postgresæ´»åŠ¨  

 [pgconf.de 2019 (5æœˆ10æ—¥,è±æ¯”é”¡)](https://2019.pgconf.de/) â€”â€”æœ€æˆåŠŸçš„å¾·è¯­PostgreSQLä¼šè®®ã€‚  
 [PGDay.IT 2019 (5æœˆ16-17æ—¥,åšæ´›å°¼äºš)](https://2019.pgday.it/en/)  
 [PGCon 2019(5æœˆ28-31æ—¥,æ¸¥å¤ªå)](https://www.pgcon.org/2019/) â€”â€”ä¸€ä¸ªå¹´åº¦ä¼šè®®ï¼Œä¾›ç”¨æˆ·å’Œå¼€å‘äººå‘˜è§é¢å’Œè®¨è®ºPostgresã€‚  
 [Postgres Vision 2019(6æœˆ24æ—¥,æ³¢å£«é¡¿)](https://postgresvision.com/)  
 
