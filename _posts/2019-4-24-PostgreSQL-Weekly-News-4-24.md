---
layout: post
title: PostgreSQL æ¯å‘¨æ–°é—» 2019-04-24
---

### PostgreSQLæ¯å‘¨æ–°é—»#302 - 2019å¹´4æœˆ24æ—¥
![_config.yml]({{ site.baseurl }}/images/PostgresWeekly.png)

å¤‡æ³¨ï¼š[è‹±æ–‡åŸæ–‡åœ°å€](https://postgresweekly.com/issues/302)

![img](https://res.cloudinary.com/cpress/image/upload/w_1280,e_sharpen:60/kkezxirgkdbs56ajblmu.jpg)

## [ä½¿ç”¨SQLå’ŒPostgresç”Ÿæˆåˆ†å½¢](https://malisper.me/generating-fractals-with-postgres-escape-time-fractals/)

åœ¨â€œ!! Con West 2019â€ä¼šè®®ä¸Šï¼ŒMichael[è°ˆåˆ°äº†ä½¿ç”¨SQLåˆ›å»ºåˆ†å½¢](https://www.youtube.com/watch?v=xKoYIvMFnoQ)ï¼Œè¿™æ˜¯ä¹¦é¢ç‰ˆã€‚è¿™ä¸ä»…æ˜¯ä¸€ä¸ªï¼ˆéå¸¸è¯¦ç»†çš„ï¼‰æœ‰è¶£çš„æ¼”è®²ï¼Œè€Œä¸”ä½ ä¼šå­¦åˆ°ä¸€äº›å…³äºSQLå’ŒPostgresçš„ä¸œè¥¿â€”â€”å¼ºçƒˆæ¨èï¼

`MICHAEL MALIS`

## [ç”µå­ä¹¦ï¼šPostgresæ—¥å¿—ä¸­æœ‰å…³ç›‘æ§çš„æœ€é‡è¦äº‹ä»¶](https://pganalyze.com/ebooks/monitoring-postgres-logs?utm_source=PostgresWeeklyPrimary)
![img](https://copm.s3.amazonaws.com/0da05f27.png)  
åœ¨è¿™æœ¬pganalyzeçš„ç”µå­ä¹¦ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥äº†è§£æœ‰å…³ç›‘æ§æŸ¥è¯¢æ€§èƒ½å’Œé˜²æ­¢åœæœºçš„æœ€é‡è¦çš„6ä¸ªPostgresæ—¥å¿—äº‹ä»¶ã€‚

`PGANALYZE` **èµåŠ©å•†**

## [å…³äºPostgres 12 REINDEX CONCURRENTLYçš„æ›´å¤šä¿¡æ¯](https://paquier.xyz/postgresql-2/postgres-12-reindex-concurrently/)
å‡ ä¸ªæ˜ŸæœŸå‰ï¼Œæˆ‘ä»¬é“¾æ¥äº†ä¸€ç¯‡å…³äº[REINDEX CONCURRENTLY](https://www.depesz.com/2019/03/29/waiting-for-postgresql-12-reindex-concurrently/)çš„ç®€çŸ­å¸–å­ï¼Œè¿™æ˜¯Postgres 12çš„ä¸€ä¸ªæ–°åŠŸèƒ½ï¼Œå®ƒå…è®¸åœ¨é‡å»ºç´¢å¼•æœŸé—´è¿›è¡Œè¯»å†™æŸ¥è¯¢ã€‚Michael Paquierç°åœ¨å¯¹å…¶è¿ä½œå’Œå†å²æœ‰äº†æ›´å¤šè§è§£ã€‚

`Michael Paquier`

## [å¦‚ä½•åœ¨Goï¼ˆlangï¼‰ä¸­ä½¿ç”¨Postgres](https://jbrandhorst.com/post/postgres/)
ç»éªŒä¸°å¯Œçš„â€œgopherâ€å¯ä»¥æä¾›æœ‰å…³é©±åŠ¨ç¨‹åºï¼Œè¿ç§»ï¼ŒæŸ¥è¯¢å’Œæµ‹è¯•çš„æœ€ä½³çŸ¥è¯†åŒ…ã€‚ å¦‚æœä½ ç¢°å·§æ˜¯Goå¼€å‘äººå‘˜ï¼Œä½ çŸ¥é“æˆ‘ä»¬æœ‰[Goçš„ç®€æŠ¥](https://golangweekly.com/?utm_source=pg&utm_medium=email&utm_campaign=cross_promo&utm_content=302)å—ï¼Ÿ

`JOHAN BRANDHORST`

## [â–¶å¦‚ä½•ä¿®å¤æŸåçš„TOASTè¡¨](https://www.youtube.com/watch?v=4jcC-lYGM0k)

`RAGHAVENDRA TADIPATHRI`

## [PostgreSQL 12æ–°åŠŸèƒ½ï¼šè®°å½•äº‹åŠ¡æ ·æœ¬ä¸­çš„æ‰€æœ‰è¯­å¥](https://www.depesz.com/2019/04/18/waiting-for-postgresql-12-log-all-statements-from-a-sample-of-transactions/)
å¿«é€Ÿæµè§ˆä¸€ä¸‹Postgres 12çš„ä¸€ä¸ªæ–°åŠŸèƒ½ï¼Œå®ƒå¯ä»¥è®©ä½ çš„è¯­å¥æ—¥å¿—æ–‡ä»¶å—æ§ï¼Œåªåœ¨ä½ æƒ³è¦çš„æ—¶å€™è®°å½•å®ƒä»¬çš„æ ·æœ¬ã€‚

`HUBERT DEPESZ LUBACZEWSKI`

# ğŸ› å·¥å…·å’Œä»£ç 

## [pg_sampletologï¼šä¸€ä¸ªå…³äºæ—¥å¿—ç¤ºä¾‹å£°æ˜æˆ–äº‹åŠ¡çš„æ‰©å±•](https://github.com/anayrat/pg_sampletolog)

Postgres 12å³å°†å‘å¸ƒå£°æ˜ç¤ºä¾‹ï¼ˆå‰æ–‡æåˆ°ï¼‰ï¼Œä½†æ­¤æ‰©å±•é€‚ç”¨äºPostgres 9.4-11ï¼Œä»¥ä¾¿æ‚¨ç°åœ¨è®°å½•è¯­å¥æˆ–äº‹åŠ¡çš„æ ·æœ¬ã€‚

`ADRIEN NAYRAT`

## [plpgsql_checkï¼šPL / pgSQLä»£ç æ£€æŸ¥å™¨](https://github.com/okbob/plpgsql_check)
å¦‚æœä½ æƒ³æ‰¾åˆ°æ½œä¼åœ¨ä½ çš„PL / pgSQLå‡½æ•°ä¸­çš„ä»»ä½•é”™è¯¯ï¼Œå®ƒå¯èƒ½æ˜¯ä¸€ä¸ªæ•‘æ˜Ÿã€‚è¯¥é¡¹ç›®åˆ›å»ºæ—¶é—´æ¯”è¾ƒé•¿äº†ï¼Œä½†ä¸€ç›´ä¿æŒæ›´æ–°ï¼Œå¹¶èƒ½è¿è¡Œåœ¨ç°ä»£Postgresç‰ˆæœ¬ä¸Šã€‚

`PAVEL STEHULE`

## [ç®¡ç†Postgresè®¿é—®çš„æœ€ä½³æ–¹å¼](https://www.strongdm.com/product/?utm_source=&utm_medium=email&utm_campaign=2019-04-24%20-%20%5BUSA%5D%20-%20%5BSchD%5D%20-%20%5BSDM%5D%20-%20%5BENT%5D%20-%20PGW)
strongDMé€‚ç”¨äºå †æ ˆä¸­çš„æ‰€æœ‰å†…å®¹ã€‚è®¤çœŸçš„è®²ï¼Œä»»ä½•æ•°æ®åº“ï¼Œä»»ä½•æœåŠ¡å™¨ï¼Œæ¯ä¸ªç¯å¢ƒã€‚[çœ‹çœ‹å®ƒæ˜¯æ€ä¹ˆå·¥ä½œçš„](https://www.strongdm.com/product/?utm_source=&utm_medium=email&utm_campaign=2019-04-24%20-%20%5BUSA%5D%20-%20%5BSchD%5D%20-%20%5BSDM%5D%20-%20%5BENT%5D%20-%20PGW)

`STRONGDM` **èµåŠ©å•†**

## [tail_n_mailï¼šä¸“æ³¨äºPostgresæ—¥å¿—çš„æ—¥å¿—æ–‡ä»¶ç›‘è§†å™¨](https://github.com/bucardo/tail_n_mail)
ä¸€ä¸ªPerlè„šæœ¬ï¼Œå¯è‡ªåŠ¨æ£€æµ‹å¹¶å‘é€é‚®ä»¶ç»™ç®¡ç†å‘˜æ—¥å¿—æ–‡ä»¶ä¸­çš„â€œæœ‰è¶£â€é¡¹ç›®ã€‚[æ–‡æ¡£åœ¨è¿™é‡Œ](https://bucardo.org/tail_n_mail/)

`JOSH WILLIAMS`

## [deno-postgresï¼šDenoçš„PostgreSQLé©±åŠ¨ç¨‹åº](https://github.com/bartlomieju/deno-postgres)
[Deno](https://github.com/denoland/deno)æ˜¯ä¸€ä¸ªæœ‰è¶£ä¸”æœ‰å®éªŒæ€§çš„JavaScript runtimeï¼Œç”±Node.jsçš„åŸå§‹åˆ›å»ºè€…æ„å»ºï¼ˆæ³¨æ„Denoæ˜¯ç”±Nodeå­—æ¯é‡æ–°æ’åˆ—è€Œæ¥çš„ï¼ï¼‰

`BARTEK IWAÅƒCZUK`

## [node-postgresï¼šNode.jsçš„éé˜»å¡PostgreSQLå®¢æˆ·ç«¯](https://github.com/brianc/node-postgres)
éå¸¸å—æ¬¢è¿ï¼Œå¹¶åœ¨è¿‡å»å‡ å‘¨å†…å‘å¸ƒäº†ä¸€äº›ç‰ˆæœ¬ã€‚

`BRIAN CARLSON`

## [pqï¼šç”¨äºæ•°æ®åº“/sqlçš„çº¯Go Postgresé©±åŠ¨ç¨‹åº](https://github.com/lib/pq)
[pqv1.1](https://github.com/lib/pq/releases/tag/v1.1.0)ä¸Šå‘¨å‘å¸ƒäº†ï¼Œæ”¯æŒGo 1.8åŠä»¥ä¸‹ç‰ˆæœ¬ã€‚

`BLAKE MIZERANY AND CONTRIBUTORS`

# ![_config.yml]({{ site.baseurl }}/images/Tips-icon.png)   æœ¬å‘¨æç¤º
ç”±HASURAæä¾›æ”¯æŒ

ä½¿ç”¨FILTERå°†è¡¨çš„å®ä½“/å€¼è½¬æ¢ä¸ºå®ä½“è¡Œ

åœ¨è¿™ä¸ªä¸»é¢˜ä¸Šå¯ä»¥å†™ä¸€ç¯‡å®Œæ•´çš„æ–‡ç« ï¼Œä½†æˆ‘æƒ³å±•ç¤ºSQLçš„æœ€åŸºæœ¬ç”¨æ³•ï¼š2003å¹´æ·»åŠ åˆ°Postgres 9.4çš„FILTERå­å¥ã€‚

å‡è®¾æ‚¨æœ‰ä¸€ä¸ªåä¸ºpropsçš„è¡¨ï¼Œå®ƒæ¥å±•ç¤ºå…·æœ‰æ•´æ•°idåˆ—ï¼Œæ–‡æœ¬å±æ€§åˆ—å’Œå€¼åˆ—çš„å®ä½“ï¼Œå±æ€§å’Œå€¼ï¼Œä»¥åŠä»¥ä¸‹å†…å®¹ï¼š
![img](https://res.cloudinary.com/cpress/image/upload/v1556051543/gyrmqkc10uqzt0liqnmi.jpg)  

[FILTERå­å¥](https://modern-sql.com/feature/filter)å®è´¨ä¸Šæ·»åŠ äº†ä¸€ä¸ªé¢å¤–çš„WHEREå­å¥æ¥èšåˆå‡½æ•°ï¼ˆä¾‹å¦‚MINï¼ŒMAXå’ŒSUMï¼‰ï¼Œå…è®¸æ‚¨å¯¹å®ƒä»¬é™å®šèŒƒå›´ã€‚
è¿™å¯¹äºæ ¹æ®attråˆ—çš„å€¼ä»valåˆ—ä¸­æå–å€¼éå¸¸æ–¹ä¾¿ï¼Œå› æ­¤å…è®¸æˆ‘ä»¬å°†è¡¨çš„å®ä½“ï¼Œå±æ€§å’Œå€¼è½¬æ¢ä¸ºæ›´ç»å…¸çš„åˆ—é›†ã€‚

```
SELECT id,
       MAX(val) FILTER(WHERE attr='name') AS name,
       MAX(val) FILTER(WHERE attr='age') AS age,
       MAX(val) FILTER(where attr='city') AS city
FROM props GROUP BY id;
```

æ‚¨å¯èƒ½éœ€è¦é‡ç°æ­¤è¡¨å¹¶ä½¿ç”¨æŸ¥è¯¢æ¥äº†è§£æ­£åœ¨å‘ç”Ÿçš„äº‹æƒ…ï¼Œä½†å®è´¨ä¸Šæˆ‘ä»¬æŒ‰IDåˆ†ç»„æ¥é€‰æ‹©æ¯ä¸€è¡Œï¼ˆå³åŸºç¡€å®ä½“çš„IDï¼‰ï¼Œç„¶åé€‰æ‹©ä¸æŸäº›å±æ€§åç§°åŒ¹é…çš„IDç›¸å…³è”çš„å€¼ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå…è®¸æˆ‘ä»¬æå–åç§°ï¼Œå¹´é¾„å’ŒåŸå¸‚å€¼ã€‚MAXåœ¨è¿™é‡Œä½œä¸ºèšåˆå‡½æ•°æ­£å¸¸å·¥ä½œï¼Œå› ä¸ºæ¯ä¸ªå®ä½“åªæœ‰ä¸€ä¸ªattr/valå¯¹ã€‚

FILTERå­å¥æœ‰æ›´å¤šçš„ç”¨é€”ï¼Œä½†æˆ‘è§‰å¾—è¿™æ˜¯ä¸€ä¸ªéå¸¸æ¸…æ¥šï¼Œä½†ä¹Ÿè®¸æ„å¤–çš„ä½¿ç”¨æ¡ˆä¾‹ã€‚

æ‚¨å¯ä»¥åœ¨[è¿™ç¯‡æ–‡ç« ](https://medium.com/little-programming-joys/the-filter-clause-in-postgres-9-4-3dd327d3c852)å’Œ[Postgreså®˜æ–¹æ–‡æ¡£](https://www.postgresql.org/docs/9.5/sql-expressions.html#SYNTAX-AGGREGATES)ä¸­äº†è§£æ›´å¤šä¿¡æ¯ã€‚

>æœ¬å‘¨æç¤ºç”±[Hasura](https://github.com/hasura/graphql-engine)æä¾›æ”¯æŒï¼ŒHasuraæ˜¯æ–°çš„å’Œç°æœ‰çš„Postgresæ•°æ®åº“ä¸Šçš„é«˜æ€§èƒ½GraphQLå¼•æ“çš„åˆ›å»ºè€…ã€‚[åœ¨GitHubä¸ŠæŸ¥çœ‹å®ƒä»¬](https://github.com/hasura/graphql-engine)ã€‚

ğŸ—“  å³å°†ä¸¾åŠçš„Postgresæ´»åŠ¨  

 [pgconf.de 2019 (5æœˆ10æ—¥,è±æ¯”é”¡)](https://2019.pgconf.de/) â€”â€”æœ€æˆåŠŸçš„å¾·è¯­PostgreSQLä¼šè®®ã€‚  
 [PGDay.IT 2019 (5æœˆ16-17æ—¥,åšæ´›å°¼äºš)](https://2019.pgday.it/en/)  
 [PGCon 2019(5æœˆ28-31æ—¥,æ¸¥å¤ªå)](https://www.pgcon.org/2019/) â€”â€”ä¸€ä¸ªå¹´åº¦ä¼šè®®ï¼Œä¾›ç”¨æˆ·å’Œå¼€å‘äººå‘˜è§é¢å’Œè®¨è®ºPostgresã€‚  
 [Postgres Vision 2019(6æœˆ24æ—¥,æ³¢å£«é¡¿)](https://postgresvision.com/)  
 

