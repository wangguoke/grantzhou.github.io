---
layout: post
title: PostgreSQL æ¯å‘¨æ–°é—» 2019-6-5
---

### PostgreSQLæ¯å‘¨æ–°é—»#308 - 2019å¹´6æœˆ5æ—¥
![_config.yml]({{ site.baseurl }}/images/PostgresWeekly.png)

å¤‡æ³¨ï¼š[è‹±æ–‡åŸæ–‡åœ°å€](https://postgresweekly.com/issues/308)

![img](https://res.cloudinary.com/cpress/image/upload/w_1280,e_sharpen:60/v1559735604/pwkj4s4p7kakrzulztte.png)  

## [Postgres12çš„è¡¨è®¿é—®æ–¹æ³•å’Œblackholeæ’ä»¶](https://paquier.xyz/postgresql-2/postgres-12-table-am-blackhole/)
è¡¨è®¿é—®æ–¹æ³•ï¼ˆé€šå¸¸ç§°ä¸ºâ€œå¯æ’å…¥å­˜å‚¨â€ï¼‰è¢«è®¤ä¸ºæ˜¯Postgres 12ä¸­çš„ä¸€ä¸ªçªå‡ºçš„ç‰¹æ€§ï¼Œå¯ä»¥æ›´å®¹æ˜“åœ°æ˜¾ç€æ‰©å±•Postgresçš„å·¥ä½œæ–¹å¼ã€‚Michaelç”¨ä¸€ä¸ªåŸºæœ¬çš„[â€œblackholeâ€æ’ä»¶](https://github.com/michaelpq/pg_plugins/tree/master/blackhole_am)å±•ç¤ºäº†å®ƒçš„åŸºç¡€çŸ¥è¯†ï¼ˆå®ƒæœ¬è´¨ä¸Šå……å½“/dev/nullå­˜å‚¨æ–¹æ³•ï¼‰ã€‚

`MICHAEL PAQUIER`

## [ä½¿ç”¨Datadogè¿›è¡Œå®æ—¶PostgreSQLæ€§èƒ½ç›‘æ§](https://www.datadoghq.com/postgres-monitoring/?utm_source=Advertisement&utm_medium=CooperPress&utm_campaign=CooperPress-PostgresWeeklyP)
![img](https://copm.s3.amazonaws.com/009a5d55.png)  
æ”¶é›†å¹¶å¯è§†åŒ–å¼€ç®±å³ç”¨çš„è‡ªå®šä¹‰PostgresæŒ‡æ ‡ï¼Œä»¥æ›´å¿«åœ°è§£å†³æ€§èƒ½é—®é¢˜ã€‚å°†å®ƒä»¬ä¸åŠ¨æ€åŸºç¡€æ¶æ„ï¼Œåˆ†å¸ƒå¼è·Ÿè¸ªå’Œæ—¥å¿—ä¸­çš„æ•°æ®ç›¸å…³è”ã€‚ä½¿ç”¨Datadogå¼€å§‹ç›‘æ§ã€‚

`DATADOG` **èµåŠ©å•†**

## [ä»‹ç»pg_auto_failoverï¼ˆå†æ¬¡ï¼‰ï¼šä¸€ä¸ªé«˜å¯ç”¨æ€§å’Œè‡ªåŠ¨æ•…éšœè½¬ç§»çš„Postgresæ‰©å±•](https://www.citusdata.com/blog/2019/05/30/introducing-pg-auto-failover/)
å¦‚æœä½ æ„Ÿè§‰æœ‰äº›ä¼¼æ›¾ç›¸è¯†ï¼Œæˆ‘ä»¬åœ¨[ä¸€ä¸ªæœˆå‰](https://postgresweekly.com/issues/304)å¾®è½¯å‘å¸ƒè¿™ä¸ªé¡¹ç›®æ—¶é¦–å…ˆå¯¹å®ƒè¿›è¡Œäº†ä»‹ç»ã€‚ç°åœ¨ï¼ŒCitus Dataå›¢é˜Ÿå¯¹pg_auto_failoverè¿›è¡Œäº†æ›´å¹¿æ³›çš„æè¿°ã€‚

`CITUS DATA (MICROSOFT)`

## [å¯¹äº‘ç«¯æ‰˜ç®¡çš„Postgresè¿›è¡ŒåŸºå‡†æµ‹è¯•ï¼šMicrosoft Azure](https://severalnines.com/blog/benchmarking-managed-postgresql-cloud-solutions-part-four-microsoft-azure)
ä¸€ç³»åˆ—æœ‰å…³æ‰˜ç®¡çš„PostgresæœåŠ¡åŸºå‡†æµ‹è¯•æ–‡ç« ä¸­çš„æœ€åä¸€ç¯‡â€”â€”â€”â€”Microsoft Azureã€‚

`SEVERALNINES`

## [PostgresOpenå¾é›†æ–‡ç« ](https://2019.postgresopen.org/callforpapers/)
ä»Šå¹´9æœˆ11æ—¥è‡³13æ—¥å°†åœ¨ç¾å›½å¥¥å…°å¤šä¸¾åŠçš„PostgresOpenå·²ç»å¼€å¯äº†ä»–ä»¬çš„æ–‡ç« å¾é›†ã€‚å…³äºPostgresæœ‰è¯è¦è¯´å—ï¼Ÿè¯·è€ƒè™‘æäº¤ä½ çš„æ–‡ç« ã€‚è¿˜æ˜¯æƒ³åœ¨æ¬§æ´²å‘è¨€ï¼Ÿ[PGConf.EU 2019â€™s CFP](https://2019.pgconf.eu/callforpapers/)ä¹Ÿå·²å¼€æ”¾æ–‡ç« å¾é›†ï¼Œå°†äºä»Šå¹´10æœˆä¸¾è¡Œã€‚

`UNITED STATES POSTGRESQL ASSOCIATION`

## [æˆ‘å¦‚ä½•é™ä½Postgreså¯¹æˆ‘çš„SaaSçš„å“åº”æ—¶é—´](https://blog.checklyhq.com/how-i-decimated-postgres-response-times-for-my-saas/)
å°†PostgresæŸ¥è¯¢å“åº”æ—¶é—´ä»å¹³å‡çº¦100msã€å³°å€¼çº¦1ç§’æ‹‰ä½åˆ°ç¨³å®šçš„1-10msã€‚

`TIM NOLET`

## [ç”µå­ä¹¦ï¼šä¼˜åŒ–PostgresæŸ¥è¯¢æ€§èƒ½çš„æœ€ä½³å®è·µ](https://pganalyze.com/ebooks/optimizing-postgres-query-performance?utm_source=PostgresWeeklySecondary)
åœ¨è¿™ä¸ªå…è´¹çš„pganalyzeç”µå­ä¹¦ä¸­ï¼Œäº†è§£å¦‚ä½•åœ¨Postgresæ•°æ®åº“ä¸Šè·å¾—3å€çš„æ€§èƒ½æå‡ï¼Œå‡å°‘500å€ä»ç£ç›˜åŠ è½½çš„æ•°æ®ã€‚

`PGANALYZE` **èµåŠ©å•†**

## [Postgresä¸­çš„åˆ†åŒºçš„æ¦‚è¿°åŠå…¶ä¸MongoDBçš„å…³ç³»](https://www.percona.com/blog/2019/05/24/an-overview-of-sharding-in-postgresql-and-how-it-relates-to-mongodbs/)

`FERNANDO LAUDARES CAMARGOS`

## â–¶[å®‰è£…ï¼Œè®¾ç½®å’Œä½¿ç”¨PostGIS](https://www.youtube.com/watch?v=EBfjZgjyZmM)
ä¸€ä¸ª30åˆ†é’Ÿçš„æˆªå±è§†é¢‘ï¼Œé€šè¿‡å®‰è£…Postgreså’ŒPostGISæ¥å¤„ç†åœ°ç†æ•°æ®ã€‚

`KLAS KARLSSON`

## [Sqitch 1.0ï¼šæ•°æ®åº“å˜æ›´ç®¡ç†](https://github.com/sqitchers/sqitch)
ç‹¬ç«‹çš„æ•°æ®åº“å’Œæ¡†æ¶ï¼ˆæ”¯æŒPostgres 8.4+ï¼‰ç³»ç»Ÿï¼Œç”¨äºé€šè¿‡SQLè„šæœ¬ç®¡ç†æ•°æ®åº“å’Œæ¨¡å¼æ›´æ”¹ã€‚ä»¥ä¸‹æ˜¯[å®ƒçš„å·¥ä½œåŸç†](https://github.com/sqitchers/sqitch/blob/develop/lib/sqitchtutorial.pod)ã€‚

`SQITCH`

# ![_config.yml]({{ site.baseurl }}/images/Tips-icon.png)   æœ¬å‘¨æç¤º
ç”±GitPrimeæä¾›æ”¯æŒ

åœ¨psqlä¸­æœç´¢æ—§æŸ¥è¯¢

Postgresçš„å®˜æ–¹ï¼ˆå¹¶ä¸”ä¸€ç›´å¾ˆå—æ¬¢è¿ï¼‰çš„psqlç»ˆç«¯å®¢æˆ·ç«¯æœ‰å¾ˆå¤šæœ‰è¶£çš„åŠŸèƒ½ï¼Œåˆ°ç°åœ¨æˆ‘æ‰æ„è¯†åˆ°è¿™éƒ½æ˜¯å› ä¸ºå®ƒä½¿ç”¨äº†[Readlineåº“](https://en.wikipedia.org/wiki/GNU_Readline)ï¼ˆé€šå¸¸ï¼ŒåŸºäºUNIXçš„å®ç”¨ç¨‹åº, shellç­‰ä¹Ÿä½¿ç”¨Readlineåº“ï¼‰ã€‚

Readlineä¸ºæé«˜psqlçš„å¯ç”¨æ€§å¸¦æ¥äº†è®¸å¤šæœ‰ç”¨çš„æ–‡æœ¬ç¼–è¾‘åŠŸèƒ½ï¼ŒåŒ…æ‹¬è¡¥å…¨åŠŸèƒ½ï¼ˆåœ¨é”®å…¥æŸ¥è¯¢æ—¶å°è¯•å®ƒï¼Œè¿™ä¸ªåŠŸèƒ½å¾ˆå¥½ç”¨ï¼‰ï¼ŒæŒ‰ `Ctrl+W` å¯ä»¥æ•´ä¸ªåˆ é™¤é”®å…¥çš„æœ€åä¸€ä¸ªè¯ã€‚

ä½ è¿˜å¯ä»¥è®¿é—®å†å²è®°å½•ï¼ˆé€šå¸¸å­˜å‚¨åœ¨è¿è¡ŒPostgresçš„ç”¨æˆ·çš„ä¸»ç›®å½•ä¸­çš„ `.psql_history` æ–‡ä»¶ä¸­ï¼‰å¯ä»¥æŒ‰â†‘æˆ–â†“æ¥æµè§ˆæœ€è¿‘è¾“å…¥çš„å‘½ä»¤å’ŒæŸ¥è¯¢ï¼Œä½ çŸ¥é“å¯ä»¥åŠ¨æ€æœç´¢å†å²è®°å½•å—ï¼Ÿ

å‡è®¾ä½ æœ‰è¿™æ ·çš„ä¼šè¯ï¼š

```
INSERT INTO people (name, age) VALUES ('Jim', 74);
SELECT * FROM people WHERE age > 18;
SELECT * FROM people ORDER BY name ASC LIMIT 1;

```

å¦‚æœç°åœ¨æŒ‰Ctrl + Rå¹¶è¾“å…¥SELï¼Œä½ å°†çœ‹åˆ°ä¹‹å‰çš„æŸ¥è¯¢å†æ¬¡å‡ºç°ï¼Œå› ä¸ºå®ƒå·²å‡†å¤‡å¥½è‡ªåŠ¨å®Œæˆã€‚å¦‚æœä½ ç»§ç»­è¾“å…¥ï¼Œå¯ä»¥è¿›ä¸€æ­¥è°ƒæ•´æœç´¢èŒƒå›´æˆ–æŒ‰Ctrl + Cä»¥è·³å‡ºæœç´¢åŠŸèƒ½ã€‚

å¦‚æœä½ ä½¿ç”¨æœç´¢æ‰¾åˆ°çš„æŸ¥è¯¢å¹¶ä¸æ˜¯ä½ æƒ³è¦çš„æŸ¥è¯¢ï¼Œé‚£ä¹ˆå†æ¬¡æŒ‰ `Ctrl + R`ï¼Œå®ƒå°†å¾ªç¯å…¶ä»–çš„åŒ¹é…ã€‚å› æ­¤ï¼Œå¦‚æœæŒ‰ `Ctrl + R` å¹¶è¾“å…¥ `SEL` ï¼Œç„¶åæŒ‰ä½`Ctrl + R`ï¼Œå®ƒå°†å¾ªç¯æ˜¾ç¤ºå­˜å‚¨åœ¨å†å²è®°å½•ä¸­çš„å…¶ä»–SELECTæŸ¥è¯¢ã€‚

>æœ¬å‘¨æç¤ºç”±[GitPrime](https://resources.gitprime.com/books/20-patterns/?utm_source=nl(pgw)&utm_medium=email-nl&utm_campaign=nl(pgw))æä¾›æ”¯æŒã€‚è·å–ä»–ä»¬æ–°çš„æŒ‡å—['20ä¸ªå·¥ç¨‹å›¢é˜Ÿéœ€è¦å…³æ³¨çš„æ¨¡å¼'](https://resources.gitprime.com/books/20-patterns/?utm_source=nl(pgw)&utm_medium=email-nl&utm_campaign=nl(pgw))çš„å‰¯æœ¬ï¼Œå…¶ä¸­åŒ…å«å¯æ“ä½œçš„è§è§£ï¼Œä»¥å¸®åŠ©æ‚¨è°ƒè¯•å¼€å‘è¿‡ç¨‹ä¸­çš„æ•°æ®ã€‚

ğŸ”¬ psqlå‘½ä»¤å‘¨æœŸè¡¨  
![img](https://res.cloudinary.com/cpress/image/upload/w_1280,e_sharpen:60/v1559733987/y74anviavcgujchlknif.png)


ğŸ—“  å³å°†ä¸¾åŠçš„Postgresæ´»åŠ¨  
- [PostgreSQL Ibiza(å…­æœˆ19-21æ—¥, ä¼Šç»´è¨)](https://www.pgibz.io/index.html) â€”â€” è¿™ä¸ªåœ¨è¥¿ç­ç‰™è‘—åçš„åº¦å‡å²›ä¸Šä¸¾è¡Œçš„ä¼šè®®å°†ä¼šå¸¦æ¥â€œæµ·æ»©ä¸Šçš„Postgresâ€ï¼ŒåŒæ—¶ä»ç„¶åœ¨ä¸€ä¸ªæ¼‚äº®æ•´æ´çš„åœºåœ°ä¸Šè¿›è¡Œä¼šè°ˆå’ŒåŸ¹è®­ã€‚  
- [Postgres Vision 2019(6æœˆ24æ—¥,æ³¢å£«é¡¿)](https://postgresvision.com/) â€”â€” Webå‘æ˜è€…Tim Berners-Leeçˆµå£«å°†å‘è¡¨ä¸»é¢˜æ¼”è®²ã€‚
- [PostgresLondon 2019 (7æœˆ2-3æ—¥ï¼Œä¼¦æ•¦)](https://postgreslondon.org/)
- [PostgresConf Beijing 2019(7æœˆ3-6æ—¥ï¼Œä¸­å›½åŒ—äº¬)](https://postgresconf.org/conferences/Beijing)
