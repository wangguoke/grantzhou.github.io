```
layout: post
title: PostgreSQL æ¯å‘¨æ–°é—» 2019-7-3
```

### PostgreSQLæ¯å‘¨æ–°é—»#312 - 2019å¹´7æœˆ3æ—¥



å¤‡æ³¨ï¼š[è‹±æ–‡åŸæ–‡åœ°å€](https://postgresweekly.com/issues/312)



![img](https://res.cloudinary.com/cpress/image/upload/w_1280,e_sharpen:60/ocstzavnuapr5ctzzwwd.jpg)

## [é€šè¿‡EXPLAINå˜æˆæ›´å¥½çš„å¼€å‘è€…](https://postgresweekly.com/link/66142/web)

ä¸€åœºæœ‰è¶£çš„é•¿è¾¾40åˆ†é’Ÿçš„è®¨è®ºï¼Œæ·±å…¥æ¢è®¨æŸ¥è¯¢è§£æå’Œè§„åˆ’çš„ä¸–ç•Œï¼Œä»¥åŠå¦‚ä½•ä½¿ç”¨EXPLAINå‘½ä»¤åˆ›å»ºæŸ¥è¯¢è®¡åˆ’ï¼Œä»¥åˆ†ææŸ¥è¯¢å’Œæ•°æ®åº“è®¾è®¡çš„æ•ˆç‡ã€‚

`LOUISE GRANDJONC`

## [æ·±å…¥äº†è§£PostgreSQLé¢„è®¾åŠå…¶å¯¹å®‰å…¨æ€§çš„å½±å“](https://info.crunchydata.com/blog/postgresql-defaults-and-impact-on-security-part-1)

å¯¹Postgresé»˜è®¤å®‰å…¨è®¾ç½®çš„ä¸¤æ­¥æ¢ç´¢ï¼ˆ[ç‚¹æ­¤çœ‹ç¬¬2éƒ¨åˆ†](https://info.crunchydata.com/blog/postgresql-defaults-and-impact-on-security-part-2)ï¼‰ä»¥åŠ[crunchy_check_access](https://github.com/CrunchyData/crunchy_check_access)æ‰©å±•å¦‚ä½•å¸®åŠ©æ‚¨æ›´åŠ æ·±å…¥çš„æŒ–æ˜ã€‚

`JOE CONWAY`

## [ä½¿ç”¨Telegrafå’ŒInfluxDBç›‘æ§PostgreSQLæ•°æ®åº“](https://www.influxdata.com/blog/monitoring-your-postgresql-database-with-telegraf-and-influxdb/?utm_campaign=postgres&utm_medium=newsletter&utm_source=cooperpress)

æœ¬æ•™ç¨‹å°†ä¸“é—¨ä»‹ç»è®¾ç½®Telegrafå’ŒInfluxDBä»¥ç›‘æ§PostgreSQLçš„è¿‡ç¨‹ã€‚

`INFLUXDATA` **èµåŠ©å•†**                                                                       

## [å¦ä¸€ä¸ªå…³äºGINç´¢å¼•çš„ä»‹ç»](http://www.louisemeta.com/blog/indexes-gin/)

æœ€è¿‘æˆ‘ä»¬å·²ç»çœ‹äº†å¾ˆå¤šå…³äºPostgresç´¢å¼•çš„ç²¾å½©æ–‡ç« ï¼ŒLouise Grandjoncåœ¨è¿™é‡Œæœ‰ä¸€ç¯‡ä¸“æ³¨äºGINï¼ˆå¹¿ä¹‰å€’æ’ç´¢å¼•ï¼‰ç´¢å¼•ä»¥åŠ[å¦‚ä½•ä½¿ç”¨å®ƒä»¬](http://www.louisemeta.com/blog/indexes-gin-algorithms/)çš„æ–‡ç« ã€‚

`LOUISE GRANDJONC`

## [Postgresçš„ç¼“æ…¢æ”€å‡å’ŒæŒä¹…åŒ–çš„ä»·å€¼](https://thenewstack.io/the-slow-climb-of-postgres-and-the-value-of-persistence/)

æœ€è¿‘PostgresVisionä¼šè®®çš„ä¸ä¼šè€…ä»æ•°æ®åº“å…ˆé©±Michael Stonebrakeråšå£«é‚£é‡Œå¬åˆ°äº†æ¶ˆæ¯ã€‚ä»–è®²è¿°äº†ä»–å¦‚ä½•å¸®åŠ©Postgresèµ°å‘å…¨ä¸–ç•Œ â€”â€” ä¸€æ®µ15å¹´å‡è…¾è·Œå®•çš„æ—…ç¨‹ã€‚

`JOAB JACKSON(THE NEW STACK)`

## [è®¾ç½®max_connectionsçš„æŒ‘æˆ˜ä»¥åŠä¸ºä½•è¦ä½¿ç”¨è¿æ¥æ± ](http://richyen.com/postgres/2019/06/25/pools_arent_just_for_cars.html)

æ˜¯ä»€ä¹ˆè®©max_connectionsæˆä¸ºäº†ä¸€ä¸ªæ£˜æ‰‹çš„Postgresè®¾å®šï¼Œä»¥åŠå¦‚ä½•ä½¿ç”¨ä¸€äº›åŸºå‡†æµ‹è¯•æ¥ä¸ºæ‚¨è‡ªå·±çš„è®¾ç½®æ‰¾åˆ°åˆç†çš„æ•°å€¼ã€‚

`RICHARD YEN`

## [Postgres 11çš„CISåŸºå‡†æµ‹è¯•å¦‚ä½•å·¥ä½œ](https://info.crunchydata.com/blog/cis-11-benchmark)

CIS PostgreSQLåŸºå‡†æµ‹è¯•æ˜¯ç”±äº’è”ç½‘å®‰å…¨ä¸­å¿ƒå‘å¸ƒçš„å…³äºå¦‚ä½•æµ‹è¯•Postgresçš„ä¸€å¥—æŒ‡å—å’Œæœ€ä½³å®è·µã€‚ä¸‹é¢ä»‹ç»å¦‚ä½•ä½¿ç”¨å®ƒæ¥æ”¹è¿›æ‚¨è‡ªå·±çš„Postgresè®¾ç½®ï¼Œå¹¶å°†å…¶ä½œä¸ºè‡ªåŠ¨åŒ–å®‰å…¨éªŒè¯è¿‡ç¨‹çš„ä¸€éƒ¨åˆ†ã€‚

`DOUGLAS HUNLEY`

## [Postgres Ibizaï¼šå¦ä¸€ç§ä¸åŒç±»å‹çš„ä¼šè®®](https://momjian.us/main/blogs/pgblog/2019.html#June_28_2019)

Postgresä¼šè®®åœ¨ä¼šè®®åœ°ç‚¹ä¸Šè¿›è¡Œäº†å¤§èƒ†çš„å°è¯•ï¼Œä¸Šä¸ªæœˆåœ¨è¥¿ç­ç‰™è‘—åçš„æ´¾å¯¹å²›ä¸¾è¡Œäº†Postgresä¼šè®®ã€‚ã€‚

`BRUCE MOMJIAN`

## [å¦‚æœæ‚¨çš„ç®¡ç†å‘˜ç”¨æˆ·æ— æ³•ç™»å½•ï¼Œå¦‚ä½•é‡æ–°è·å¾—å¯¹Postgresçš„è®¿é—®æƒé™](https://fluca1978.github.io/2019/06/27/PostgreSQLSingleMode.html)

æ‚¨å¯ä»¥ä¾é Postgresçš„å•ç”¨æˆ·æ¨¡å¼é‡æ–°è·å¾—è®¿é—®æƒé™ã€‚

`LUCAFERRARI`

## [PostgreSQLæ—¥å¿—è®°å½•æœ€ä½³å®è·µ](https://www.strongdm.com/postgresql-logging-best-practices/?utm_source=PG%20Weekly&utm_medium=email&utm_campaign=2019-07-03%20-%20%5BSchD%5D%20-%20%5BSDM%5D)

ä»¥ä¸‹æ˜¯ä¸€äº›è®©æ¯ä¸ªäººéƒ½èƒ½åœ¨åŒä¸€é¡µé¢ä¸Šçš„æœ€ä½³å®è·µã€‚

`STRONGDM` **èµåŠ©å•†**

## [å¦‚ä½•åœ¨Azure DBä¸Šä¸ºPostgreSQLè®¾ç½®PgBouncerä½œä¸ºè¿æ¥æ± ä»£ç†](https://techcommunity.microsoft.com/t5/Azure-Database-for-PostgreSQL/Steps-to-install-and-setup-PgBouncer-connection-pooling-proxy/ba-p/730555)

`PARIKSHIT SAVJANI`.

## [åœ¨Windowsä¸‹ä½¿ç”¨MSYS2å’ŒMinGWæ„å»ºPostgreså’ŒOpenSSL](https://www.cybertec-postgresql.com/en/bulding-postgresql-x86-x64-and-openssl-using-msys2-and-mingw-under-windows/)

å¯ä»¥é€šè¿‡åœ¨Windowsä¸Šä½¿ç”¨MSYS2ï¼ˆCygwinæ´¾ç”Ÿçš„POSIXå…¼å®¹å±‚ï¼‰ä¸ºè‡ªå·±ç¼–è¯‘Postgresã€‚

`PAVLO GOLUB`

## [PgBouncer 1.10.0å‘å¸ƒ](https://pgbouncer.github.io/2019/07/pgbouncer-1-10-0) 

PgBounceræ˜¯ä¸€ä¸ªè½»é‡çº§è¿æ¥æ± ï¼Œé™¤å»[å…¶ä»–äº‹æƒ…](https://pgbouncer.github.io/changelog.html#pgbouncer-110x)ï¼Œæœ€æ–°ç‰ˆæœ¬æ”¹è¿›äº†TLS 1.3çš„æ”¯æŒã€‚

`PETER EISENTRAUT`

## [db-to-sqlite 1.0ï¼šä¸€ä¸ªç”¨äºå°†è¡¨æˆ–æŸ¥è¯¢ä»ä»»ä½•SQLæ•°æ®åº“å¯¼å‡ºåˆ°SQLiteçš„CLIå·¥å…·](https://github.com/simonw/db-to-sqlite)

`SIMON WILLISON`



# ğŸ’¡ æœ¬å‘¨æç¤º

ç”±GitPrimeæ”¯æŒæä¾›

### æŒä¹…æ€§æ¢å–æ€§èƒ½æå‡

â€‹	Postgresä¸­çš„æŒä¹…æ€§æ˜¯ç¡®ä¿æ‚¨æ‰§è¡Œçš„ä»»ä½•æ•°æ®ç›¸å…³æ“ä½œæˆåŠŸæäº¤åˆ°ç£ç›˜ï¼Œå› æ­¤å¦‚æœPostgresæœåŠ¡å™¨è¿è¡Œæ—¶çªç„¶é‡å¯æˆ–æ–­ç”µï¼Œç¨åå®ƒå°±å¯ä»¥è¿”å›åˆ°æ­£ç¡®çš„çŠ¶æ€ã€‚
â€‹	æŒä¹…æ€§çš„éœ€æ±‚å¯èƒ½å› æ‚¨çš„ä½¿ç”¨æ¡ˆä¾‹æˆ–æ‚¨æƒ³è¦æ‰§è¡Œçš„æ“ä½œè€Œå¼‚ã€‚ä¾‹å¦‚ï¼Œåœ¨å°†å¤§å‹æ•°æ®åŠ è½½åˆ°æ–°æ•°æ®åº“æ—¶ï¼Œæ‚¨å¯èƒ½ä¼šä½¿ç”¨æŒä¹…æ€§æ¢å–æ€§èƒ½æå‡ï¼Œè€Œå¦‚æœæ‚¨å®æ—¶è¿è¡Œçš„æ•°æ®åº“ä¸­ï¼Œåˆ™æŒä¹…æ€§æ¯”æ€§èƒ½æ›´é‡è¦ï¼

å¦‚æœæ‚¨ä¹æ„ä¸ºæ€§èƒ½äº¤æ¢è€ç”¨æ€§ï¼Œè¿™é‡Œæœ‰å‡ ä¸ªè®¾ç½®å¯ä»¥è°ƒæ•´ï¼ˆåœ¨SHOW config_fileæ˜¾ç¤ºçš„æ–‡ä»¶ä¸­ï¼‰ä»¥å®ç°å®ƒï¼š

â€‹	â€¢ å…³é—­[fsyncè®¾ç½®](https://www.postgresql.org/docs/9.3/runtime-config-wal.html#GUC-FSYNC)ä»¥é˜»æ­¢Postgresç¡®ä¿æ‰€æœ‰æ›´æ–°éƒ½ç‰©ç†å†™å…¥ç£ç›˜ã€‚è™½ç„¶æœ€ç»ˆéƒ½ä¼šæˆåŠŸï¼Œä½†è¿™ä¼šè®©Postgresæ— æ³•ç¡®ä¿¡æ•°æ®åˆ·ç›˜æˆåŠŸã€‚

â€‹	â€¢ ç¦ç”¨[FULL PAGE WRITE](https://www.postgresql.org/docs/9.3/runtime-config-wal.html#GUC-FULL-PAGE-WRITES)ã€‚è¿™åœ¨æŸç§ç¨‹åº¦ä¸Šä¸fsyncå¯†åˆ‡ç›¸å…³ã€‚

â€‹	â€¢ å°†[synchronous_commitè®¾ç½®ä¸º'off'](https://www.postgresql.org/docs/9.3/runtime-config-wal.html#GUC-SYNCHRONOUS-COMMIT)ä»¥ä½¿äº‹åŠ¡åœ¨WALè®°å½•å†™å…¥ç£ç›˜ä¹‹å‰è¢«è®¤å®šä¸ºæˆåŠŸã€‚

â€‹	â€¢ å¢åŠ [checkpoint_segmentså’Œcheckpoint_timeout](https://www.postgresql.org/docs/9.3/runtime-config-wal.html#GUC-CHECKPOINT-SEGMENTS)çš„é€‰é¡¹ï¼Œä»¥å‡å°‘WALæ¡ç›®å‘ç£ç›˜æäº¤çš„é¢‘ç‡

æƒ³è¦ä»¥åå›çœ‹è¿™äº›æŠ€å·§ï¼Ÿæ‚¨éœ€è¦Postgresçš„[éæŒä¹…æ€§è®¾ç½®æ–‡æ¡£](https://www.postgresql.org/docs/9.3/non-durability.html)ã€‚

æœ¬å‘¨çš„tipsç”±[GitPrime](https://resources.gitprime.com/books/20-patterns/?utm_source=nl(pgw)&utm_medium=email-nl&utm_campaign=nl(pgw))èµåŠ©ã€‚è·å–ä»–ä»¬çš„æ–°é¢†åŸŸæŒ‡å—[ã€Šå·¥ç¨‹å›¢é˜Ÿä¸­éœ€è¦æ³¨æ„çš„20ä¸ªæ¨¡å¼ã€‹](https://resources.gitprime.com/books/20-patterns/?utm_source=nl(pgw)&utm_medium=email-nl&utm_campaign=nl(pgw))çš„å‰¯æœ¬ï¼Œå…¶ä¸­å……æ»¡äº†å¯æ“ä½œçš„è§è§£ï¼Œä»¥å¸®åŠ©ç”¨æ•°æ®è°ƒè¯•æ‚¨çš„å¼€å‘è¿‡ç¨‹ã€‚

ğŸ—“  **å³å°†ä¸¾åŠçš„Postgresæ´»åŠ¨**  

â€‹	â€¢ [PGConf.Brasil 2019](https://www.pgconf.com.br/2019/en/) (8æœˆ1æ—¥ - 3æ—¥ï¼Œå·´è¥¿åœ£ä¿ç½—) â€”â€” ä¸ºæœŸä¸‰å¤©çš„ä¼šè®®ï¼ŒåŒ…æ‹¬ä¼šè°ˆã€æ•™ç¨‹ã€è¯¾ç¨‹å’Œé—ªç”µä¼šè°ˆã€‚

â€‹	â€¢ [PGDay Austria 2019](https://pgday.at/en/)ï¼ˆ9æœˆ6æ—¥ï¼Œå¥¥åœ°åˆ©ç»´ä¹Ÿçº³æ–°åŸï¼‰

â€‹	â€¢ [PostgreSQL Conference Asia 2019](http://2019.pgconf.asia/)ï¼ˆ9æœˆ9æ—¥ - 12æ—¥ï¼Œå°åº¦å°¼è¥¿äºšå·´å˜å²›ï¼‰

â€‹	â€¢ [PostgresConf South Africa 2019](https://postgresconf.org/conferences/SouthAfrica2019)ï¼ˆ10æœˆ8 - 9æ—¥ï¼Œçº¦ç¿°å†…æ–¯å ¡ï¼‰â€”â€”å¯¹äºä½¿ç”¨Postgresçš„æ•°æ®åº“ç®¡ç†å’Œå¼€å‘ç¤¾åŒºçš„äººå‘˜ä¹‹é—´ç›¸äº’äº†è§£æ¥è¯´æ˜¯ä¸€ä¸ªæœºä¼šã€‚

